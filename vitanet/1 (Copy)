from flask import request, jsonify

@app.route('/badge-unlock', methods=['GET'])
def badge_unlock():
    role = request.args.get('role')
    module = request.args.get('module')
    mood = request.args.get('mood')

    badge_map = {
        "Translator": "🌐 Global Translator",
        "Tester": "🐞 Bug Hunter",
        "Developer": "🧩 Spark Module Builder",
        "VitalsSync": "💓 Vitals Sync Champion",
        "StaffTime": "⏱️ Shift Tracker Pro",
        "Harmony": "🎵 Peaceful Pulse",
        "Blaze": "🔥 Debug Sprint Hero",
        "Spark": "⚡ Rapid Launcher"
    }

    unlocked = []
    for key in [role, module, mood]:
        if key and key in badge_map:
            unlocked.append({ "badge": badge_map[key], "category": key })

    return jsonify({
        "unlocked_badges": unlocked,
        "count": len(unlocked),
        "status": "✨ Badge Unlock Complete"
    })


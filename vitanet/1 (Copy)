from flask import request, jsonify

@app.route('/badge-unlock', methods=['GET'])
def badge_unlock():
    role = request.args.get('role')
    module = request.args.get('module')
    mood = request.args.get('mood')

    badge_map = {
        "Translator": "ğŸŒ Global Translator",
        "Tester": "ğŸ Bug Hunter",
        "Developer": "ğŸ§© Spark Module Builder",
        "VitalsSync": "ğŸ’“ Vitals Sync Champion",
        "StaffTime": "â±ï¸ Shift Tracker Pro",
        "Harmony": "ğŸµ Peaceful Pulse",
        "Blaze": "ğŸ”¥ Debug Sprint Hero",
        "Spark": "âš¡ Rapid Launcher"
    }

    unlocked = []
    for key in [role, module, mood]:
        if key and key in badge_map:
            unlocked.append({ "badge": badge_map[key], "category": key })

    return jsonify({
        "unlocked_badges": unlocked,
        "count": len(unlocked),
        "status": "âœ¨ Badge Unlock Complete"
    })

